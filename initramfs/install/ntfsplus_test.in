#!/bin/bash

build() {
    add_binary "/bin/bash"
    add_binary "/bin/mount"
    add_binary "/bin/mountpoint"
    add_binary "/bin/umount"
    add_binary "/sbin/parted"
    add_binary "/sbin/mkfs.ext4"
    add_binary "/sbin/mkfs.ntfsplus"
    add_binary "/sbin/ntfsck"
    add_binary "/bin/dd"
    add_binary "/usr/bin/%checksum%"
    add_binary "/bin/rm"
    add_binary "/bin/sleep"
    add_binary "/bin/timeout"
    add_binary "/bin/find"

    # Add test scripts
    find "%srcdir%/tests" -name "*.sh" | while read -r test; do
        add_file "$test" "/tests/$(basename "$test")"
    done

    # Add helper scripts
    find "%srcdir%/helpers" -type f | while read -r helper; do
        add_file "$helper" "/bin/$(basename "$helper")"
    done

    add_runscript
}

# This is a dummy function to satisfy mkinitcpio
help() {
    :
}
